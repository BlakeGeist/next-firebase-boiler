{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport clientCredentials from '../credentials/client';\nimport Router from 'next/router';\nimport { translate } from '../helpers/quickHelpers';\n\nvar Nav = function Nav(_ref) {\n  var user = _ref.user,\n      dispatch = _ref.dispatch,\n      lang = _ref.lang,\n      strings = _ref.strings;\n  var leftNav = [{\n    href: \"/\".concat(lang),\n    label: translate('HOME', strings, lang)\n  }, {\n    href: \"/\".concat(lang, \"/about\"),\n    label: translate('ABOUT-US', strings, lang)\n  }, {\n    href: \"/\".concat(lang, \"/contact\"),\n    label: translate('CONTACT', strings, lang)\n  }, {\n    href: \"/\".concat(lang, \"/p\"),\n    label: translate('SHOP', strings, lang)\n  }, {\n    href: \"/\".concat(lang, \"/blog\"),\n    label: translate('BLOG', strings, lang)\n  }, {\n    href: 'https://github.com/BlakeGeist/next-firebase-boiler',\n    label: 'GitHub',\n    isExternal: true\n  }].map(function (link) {\n    link.key = \"nav-link-\".concat(link.href, \"-\").concat(link.label);\n    return link;\n  });\n  var userNav = [{\n    href: \"/\".concat(lang, \"/sign-up\"),\n    label: translate('SIGN-UP', strings, lang)\n  }, {\n    href: \"/\".concat(lang, \"/login\"),\n    label: translate('LOGIN', strings, lang)\n  }].map(function (link) {\n    link.key = \"nav-link-\".concat(link.href, \"-\").concat(link.label);\n    return link;\n  });\n\n  var handleLogout = function handleLogout(e) {\n    e.preventDefault();\n    firebase.auth().signOut().then(function () {\n      dispatch({\n        type: 'SET_ITEM',\n        name: 'user',\n        payload: {}\n      });\n      Router.push(\"/\".concat(lang, \"/login\"));\n    });\n    fetch('/api/logout', {\n      method: 'POST',\n      credentials: 'same-origin'\n    });\n  };\n\n  var LinkItem = function LinkItem(_ref2) {\n    var isExternal = _ref2.isExternal,\n        href = _ref2.href,\n        label = _ref2.label;\n\n    if (isExternal) {\n      return __jsx(\"a\", {\n        href: href,\n        className: \"navItem\",\n        target: \"_blank\"\n      }, label);\n    } else {\n      return __jsx(Link, {\n        href: href\n      }, __jsx(\"a\", {\n        className: \"navItem\"\n      }, label));\n    }\n  };\n\n  useEffect(function () {\n    if (!firebase.apps.length) {\n      firebase.initializeApp(clientCredentials);\n    }\n\n    ;\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        return user.getIdToken().then(function (token) {\n          //dispatch({ type: 'SET_ITEM', name: 'user', payload: user });\n          // eslint-disable-next-line no-undef\n          return fetch('/api/login', {\n            method: 'POST',\n            // eslint-disable-next-line no-undef\n            headers: new Headers({\n              'Content-Type': 'application/json'\n            }),\n            credentials: 'same-origin',\n            body: _JSON$stringify({\n              token: token\n            })\n          });\n        });\n      } else {\n        // eslint-disable-next-line no-undef\n        fetch('/api/logout', {\n          method: 'POST',\n          credentials: 'same-origin'\n        });\n      }\n    });\n  });\n  return __jsx(React.Fragment, null, __jsx(\"nav\", {\n    className: \"jsx-225916514\"\n  }, __jsx(\"ul\", {\n    className: \"jsx-225916514\"\n  }, leftNav.map(function (_ref3) {\n    var key = _ref3.key,\n        href = _ref3.href,\n        label = _ref3.label,\n        isExternal = _ref3.isExternal;\n    return __jsx(\"li\", {\n      key: key,\n      className: \"jsx-225916514\"\n    }, __jsx(LinkItem, {\n      href: href,\n      label: label,\n      isExternal: isExternal\n    }));\n  })), __jsx(\"ul\", {\n    className: \"jsx-225916514\" + \" \" + \"user-nav\"\n  }, user && user.uid ? __jsx(React.Fragment, null, __jsx(\"li\", {\n    className: \"jsx-225916514\"\n  }, __jsx(Link, {\n    href: \"/\".concat(lang, \"/dashboard\")\n  }, __jsx(\"a\", {\n    className: \"jsx-225916514\" + \" \" + \"navItem\"\n  }, translate('DASHBOARD', strings, lang)))), __jsx(\"li\", {\n    className: \"jsx-225916514\"\n  }, __jsx(\"a\", {\n    href: \"\",\n    onClick: handleLogout,\n    className: \"jsx-225916514\" + \" \" + \"navItem\"\n  }, translate('LOGOUT', strings, lang)))) : __jsx(React.Fragment, null, __jsx(\"li\", {\n    className: \"jsx-225916514\"\n  }, __jsx(Link, {\n    href: \"/\".concat(lang, \"/sign-up\")\n  }, __jsx(\"a\", {\n    className: \"jsx-225916514\" + \" \" + \"navItem\"\n  }, translate('SIGN-UP', strings, lang)))), __jsx(\"li\", {\n    className: \"jsx-225916514\"\n  }, __jsx(Link, {\n    href: \"/\".concat(lang, \"/login\")\n  }, __jsx(\"a\", {\n    className: \"jsx-225916514\" + \" \" + \"navItem\"\n  }, translate('LOGIN', strings, lang))))))), __jsx(_JSXStyle, {\n    id: \"1554983981\"\n  }, [\".navItem{color:#067df7;-webkit-text-decoration:none;text-decoration:none;font-size:13px;}\"]), __jsx(_JSXStyle, {\n    id: \"4005949030\"\n  }, [\"body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Avenir Next,Avenir, Helvetica,sans-serif;}\", \"ul.jsx-225916514{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}\", \".user-nav.jsx-225916514{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}\", \"li.jsx-225916514{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}\", \"li.jsx-225916514:after{content:\\\" | \\\";padding:0 5px;}\", \"li.jsx-225916514:last-of-type.jsx-225916514:after{content:\\\"\\\";}\", \"nav.jsx-225916514{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}\"]));\n};\n\nexport default connect(function (state) {\n  return state;\n})(Nav);","map":null,"metadata":{},"sourceType":"module"}